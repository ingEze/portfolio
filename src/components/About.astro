---
import { translations } from '../i18n/translations'
---

<section class="section" id="about">
    <h2 class="section-title" data-i18n="about.title">{translations.es.about.title}</h2>
    <p class="desc" data-i18n="about.description">
        {translations.es.about.description}
    </p>
    <p class="quote" data-i18n="about.quote">
        {translations.es.about.quote}
    </p>
</section>

<style>
    .desc {
        font-size: 1.2rem;
    }

    .quote {
        margin-top: 1rem;
        color: var(--text-secondary);
        font-style: italic;
    }
</style>

<script>
    import { translations, type Language } from '../i18n/translations'

    function updateTranslations(lang: Language) {
        const elements = document.querySelectorAll('[data-i18n]')
        
        elements.forEach((element) => {
            const key = element.getAttribute('data-i18n')
            if (!key) return

            const keys = key.split('.')
            let value: any = translations[lang]

            for (const k of keys) {
                value = value?.[k]
            }

            if (value && typeof value === 'string') {
                element.textContent = value
            }
        });
    }

    window.addEventListener('languageChange', (e: Event) => {
        const customEvent = e as CustomEvent<{ lang: Language }>
        updateTranslations(customEvent.detail.lang)
    });

    const currentLang = (localStorage.getItem('language') || 'es') as Language
    updateTranslations(currentLang)
</script>