---
import { translations } from '../i18n/translations'
---

<section class="section" id="about">
    <h2 class="section-title" data-i18n="about.title">{translations.es.about.title}</h2>
    <p class="desc" data-i18n="about.description">
        {translations.es.about.description}
    </p>
    <p class="quote" data-i18n="about.quote">
        {translations.es.about.quote}
    </p>
</section>

<style>
    .desc {
        font-size: 1.2rem;
        line-height: 1.8;
        margin-bottom: 0;
    }

    .quote {
        margin-top: 1.5rem;
        color: var(--text-secondary);
        font-style: italic;
        font-size: 1.1rem;
        padding-left: 1rem;
        border-left: 3px solid var(--accent);
    }

    @media (max-width: 768px) {
        .desc {
            font-size: 1.05rem;
            line-height: 1.7;
        }

        .quote {
            font-size: 0.95rem;
            margin-top: 1.2rem;
            padding-left: 0.8rem;
        }
    }

    @media (max-width: 480px) {
        .desc {
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .quote {
            font-size: 0.85rem;
            margin-top: 1rem;
            padding-left: 0.6rem;
            border-left-width: 2px;
        }
    }
</style>

<script>
    import { translations, type Language } from '../i18n/translations'

    function updateTranslations(lang: Language) {
        const elements = document.querySelectorAll('[data-i18n]')
        
        elements.forEach((element) => {
            const key = element.getAttribute('data-i18n')
            if (!key) return

            const keys = key.split('.')
            let value: any = translations[lang]

            for (const k of keys) {
                value = value?.[k]
            }

            if (value && typeof value === 'string') {
                element.textContent = value
            }
        });
    }

    window.addEventListener('languageChange', (e: Event) => {
        const customEvent = e as CustomEvent<{ lang: Language }>
        updateTranslations(customEvent.detail.lang)
    });

    const currentLang = (localStorage.getItem('language') || 'es') as Language
    updateTranslations(currentLang)
</script>